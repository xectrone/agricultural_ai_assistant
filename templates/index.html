<!doctype html>
<html lang="en" class="remember-theme">
  <head>
    <meta charset="utf-8">
    <!--
      Available classes for <html> element:

      'dark'                  Enable dark mode - Default dark mode preference can be set in app.js file (always saved and retrieved in localStorage afterwards):
                                window.Dashmix = new App({ darkMode: "system" }); // "on" or "off" or "system"
      'dark-custom-defined'   Dark mode is always set based on the preference in app.js file (no localStorage is used)
      'remember-theme'        Remembers active color theme between pages using localStorage when set through
                                - Theme helper buttons [data-toggle="theme"]
    -->
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <title>Agricultural AI Assistant</title>

    <meta name="description" content="Dashmix - Bootstrap 5 Admin Template &amp; UI Framework created by pixelcave">
    <meta name="author" content="pixelcave">
    <meta name="robots" content="index, follow">

    <!-- Open Graph Meta -->
    <meta property="og:title" content="Dashmix - Bootstrap 5 Admin Template &amp; UI Framework">
    <meta property="og:site_name" content="Dashmix">
    <meta property="og:description" content="Dashmix - Bootstrap 5 Admin Template &amp; UI Framework created by pixelcave">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:image" content="">

    <!-- Icons -->
    <!-- The following icons can be replaced with your own, they are used by desktop and mobile browsers -->
    <!-- Icons -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='media/favicons/favicon.png') }}">
    <link rel="icon" type="image/png" sizes="192x192" href="{{ url_for('static', filename='media/favicons/favicon-192x192.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='media/favicons/apple-touch-icon-180x180.png') }}">
    <!-- END Icons -->

    <!-- Stylesheets -->
    <!-- Dashmix framework -->
    <link rel="stylesheet" id="css-main" href="{{ url_for('static', filename='css/dashmix.min.css') }}">


    <!-- You can include a specific file from css/themes/ folder to alter the default color theme of the template. eg: -->
    <!-- <link rel="stylesheet" id="css-theme" href="assets/css/themes/xwork.min.css"> -->
    <!-- END Stylesheets -->

    <!-- Load and set color theme + dark mode preference (blocking script to prevent flashing) -->
    <script src="{{ url_for('static', filename='js/setTheme.js') }}"></script>

  </head>

  <body>
    <!-- Page Container -->
    <!--
      Available classes for #page-container:

      SIDEBAR & SIDE OVERLAY

        'sidebar-r'                                 Right Sidebar and left Side Overlay (default is left Sidebar and right Side Overlay)
        'sidebar-mini'                              Mini hoverable Sidebar (screen width > 991px)
        'sidebar-o'                                 Visible Sidebar by default (screen width > 991px)
        'sidebar-o-xs'                              Visible Sidebar by default (screen width < 992px)
        'sidebar-dark'                              Dark themed sidebar

        'side-overlay-hover'                        Hoverable Side Overlay (screen width > 991px)
        'side-overlay-o'                            Visible Side Overlay by default

        'enable-page-overlay'                       Enables a visible clickable Page Overlay (closes Side Overlay on click) when Side Overlay opens

        'side-scroll'                               Enables custom scrolling on Sidebar and Side Overlay instead of native scrolling (screen width > 991px)

      HEADER

        ''                                          Static Header if no class is added
        'page-header-fixed'                         Fixed Header


      FOOTER

        ''                                          Static Footer if no class is added
        'page-footer-fixed'                         Fixed Footer (please have in mind that the footer has a specific height when is fixed)

      HEADER STYLE

        ''                                          Classic Header style if no class is added
        'page-header-dark'                          Dark themed Header
        'page-header-glass'                         Light themed Header with transparency by default
                                                    (absolute position, perfect for light images underneath - solid light background on scroll if the Header is also set as fixed)
        'page-header-glass page-header-dark'         Dark themed Header with transparency by default
                                                    (absolute position, perfect for dark images underneath - solid dark background on scroll if the Header is also set as fixed)

      MAIN CONTENT LAYOUT

        ''                                          Full width Main Content if no class is added
        'main-content-boxed'                        Full width Main Content with a specific maximum width (screen width > 1200px)
        'main-content-narrow'                       Full width Main Content with a percentage width (screen width > 1200px)
    -->
    <div id="page-container">

      <!-- Main Container -->
      <main id="main-container">
        <!-- Page Content -->
        <div class="bg-image" style="background-image: url('{{ url_for('static', filename='media/photos/photo17@2x.jpg') }}');">
          <div class="hero bg-black-75">
            <div class="hero-inner">
              <div class="content content-full">
                <div class="row justify-content-center">
                  <div class="col-md-6 py-5 text-center">

                        <div class="push">
                            <a class="link-fx fw-bold fs-1" href="index.html">
                            <span class="text-white">Agricultural </span><span class="text-primary"> AI Assistant</span>
                            </a>
                            <p class="text-uppercase fw-bold fs-sm text-white-75">Coming Soon</p>
                        </div>
                
                        <form id="uploadForm" method="post" enctype="multipart/form-data">                        
                            
                              <!-- <label class="form-label" for="dm-post-edit-image">Featured Image</label> -->
                              <input class="form-control" type="file" id="image"accept="image/*" required>
                              <div class="mt-2">
                                <img class="img-fluid" src="assets/media/photos/photo19.jpg" alt="">
                              </div>
                          
                            <button type="submit"class="btn btn-hero btn-primary" href="javascript:void(0)" data-toggle="click-ripple">Detect Disease</button>
                        </form>
                        <br>
                        <br>

                        
                        <div class="block block-rounded">
                          <div class="block-header block-header-default">
                            <h3 class="block-title">Disease Detected</h3>
                          </div>
                          <div id="results" style="
                            max-height: 500px; /* Adjust height as needed */
                            overflow-y: auto; /* Enables scrolling */
                            margin-top: 20px; /* Adds space to prevent overlap */
                            padding: 10px;
                            "> </div>
                        </div>
                    <script>
                        document.getElementById('uploadForm').onsubmit = async function (e) {
                            e.preventDefault();
                            const formData = new FormData();
                            const fileInput = document.getElementById('image');
                            formData.append('image', fileInput.files[0]);
                            const response = await fetch('/detect', {method: 'POST', body: formData });
                            const result = await response.json();
                            displayResults(result.results);
                        };
                
                        function displayResults(results) {
                            const resultsDiv = document.getElementById('results');
                            resultsDiv.innerHTML = '';  // Clear previous results
                            if (results && results.length > 0) {
                                results.slice(0, 2).forEach(result => {  // Only take the first two results
                                    const resultHTML = `
                                          <div class="block-content">
                                            <table class="table table-borderless">
                                              <tbody>
                                                <tr class="table-active">
                                                  <td class="d-none d-sm-table-cell">
                                                      <a>${result.label}</a>
                                                  </td>
                                                </tr>
                                                <tr>
                                                  <td>
                                                    <p>Confidence: ${result.confidence}</p>
                                                    <p>Description: ${result.description}</p>
                                                    <p>Cause: ${result.cause}</p>
                                                    <p>Treatment: ${result.treatment}</p>
                                                    <p>Prevention: ${result.prevention}</p>
                                                  </td>
                                                </tr>
                                              </tbody>
                                            </table>
                                          </div>
                                    `;
                                    resultsDiv.innerHTML += resultHTML;
                                });
                            } else {
                                resultsDiv.innerHTML = '<p>No results found.</p>';
                            }
                        }

                    </script>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END Page Content -->
      </main>
      <!-- END Main Container -->
    </div>
    <!-- END Page Container -->

    <!--
      Dashmix JS

      Core libraries and functionality
      webpack is putting everything together at assets/_js/main/app.js
    -->
    <script src="{{ url_for('static', filename='js/dashmix.app.min.js') }}"></script>

    <!-- jQuery (required for jQuery Countdown plugin) -->
    <script src="{{ url_for('static', filename='js/lib/jquery.min.js') }}"></script>
    
    <!-- Page JS Plugins -->
    <script src="{{ url_for('static', filename='js/plugins/jquery-countdown/jquery.countdown.min.js') }}"></script>
    
    <!-- Page JS Code -->
    <script src="{{ url_for('static', filename='js/pages/op_coming_soon.min.js') }}"></script>
    
  </body>
</html>






